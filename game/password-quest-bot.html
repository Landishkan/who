<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–∞—â–∏—Ç–∞ –ø–∞—Ä–æ–ª–µ–º</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=Orbitron:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #0f4cff;
            --primary-light: #3a6bff;
            --error-color: #ff2d75;
            --success-color: #16a541;
            --text-color: #ffffff;
            --background-dark: #0a0a20;
            --background-light: #121235;
            --bot-colors: #ff3d3d, #ffcc00, #5B9CF0;
        }

        body {
            font-family: 'Rajdhani', 'Roboto', sans-serif;
            background: var(--background-dark);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            text-align: center;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .back-button {
            display: flex;
            align-items: center;
            color: var(--text-color);
            text-decoration: none;
            font-size: 1.1rem;
            padding: 10px 15px;
            background: rgba(58, 107, 255, 0.2);
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            transition: all 0.3s;
        }
        
        .back-button:hover {
            background: rgba(58, 107, 255, 0.4);
            transform: translateY(-2px);
        }
        
        .back-button i {
            margin-right: 8px;
        }

        .game-container {
            max-width: 600px;
            margin: 0 auto;
        }

        h1 {
            font-family: 'Orbitron', sans-serif;
            background: linear-gradient(90deg,#0f4cff, #3a6bff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin: 0;
            flex-grow: 1;
            font-size: 2.2rem;
        }

        .subtitle {
            color: #8FB8ED;
            margin-top: 5px;
            font-size: 1.1rem;
            margin-bottom: 25px;
        }

        .bots-container {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .bot {
            width: 150px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .bot-name {
            margin-bottom: 5px;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .progress-container {
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 5px;
            position: relative;
        }

        .progress-bar {
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease-out;
        }

        .bot-1 .progress-bar { background-color: #ff3d3d; }
        .bot-2 .progress-bar { background-color: #ffcc00; }
        .bot-3 .progress-bar { background-color: #5B9CF0; }

        .progress-text {
            position: absolute;
            width: 100%;
            text-align: center;
            line-height: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }

        .bot-speed {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .bot-threat {
            font-size: 0.8rem;
            margin-top: 3px;
            color: rgba(255, 255, 255, 0.9);
            font-weight: bold;
        }

        .password-display {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .password-char {
            width: 50px;
            height: 70px;
            background: rgba(0, 242, 255, 0.1);
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-family: 'Orbitron', sans-serif;
            transition: all 0.3s;
        }
        
        .password-char.current {
            border-color: #00f2ff;
            box-shadow: 0 0 15px rgba(0, 242, 255, 0.7);
            background: rgba(0, 242, 255, 0.2);
            transform: translateY(-5px);
        }

        .password-char.filled {
            border-color: var(--success-color);
            background: rgba(22, 165, 65, 0.15);
        }

        .input-container {
            margin: 25px 0;
        }

        .password-input {
            width: 100%;
            max-width: 400px;
            padding: 15px;
            font-size: 1.2rem;
            background: rgba(18, 18, 53, 0.5);
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            color: white;
            text-align: center;
            font-family: 'Orbitron', monospace;
            letter-spacing: 2px;
            margin-bottom: 15px;
        }
        
        .password-input:focus {
            outline: none;
            border-color: #00f2ff;
            box-shadow: 0 0 15px rgba(0, 242, 255, 0.3);
        }
        
        .password-input:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .input-info {
            margin: 10px 0;
            font-size: 1.1rem;
            color: var(--primary-color);
            font-weight: bold;
        }
        
        .input-hint {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 8px;
        }

        .timer-container {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            margin: 20px auto;
            max-width: 300px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .timer {
            font-size: 2.5rem;
            margin: 10px 0;
            color: var(--primary-color);
            font-family: 'Orbitron', sans-serif;
            font-weight: bold;
        }
        
        .timer.warning {
            color: var(--error-color);
            animation: pulse 0.5s infinite;
        }

        .timer-label {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.7);
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-content {
            background: var(--background-light);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            border: 2px solid var(--primary-color);
            box-shadow: 0 0 30px rgba(15, 76, 255, 0.5);
        }

        .modal h2 {
            color: var(--primary-color);
            margin-top: 0;
            font-size: 2rem;
        }

        .modal button {
            padding: 12px 30px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .modal button:hover {
            background: var(--primary-light);
            transform: translateY(-2px);
        }

        .win { color: var(--success-color); }
        .lose { color: var(--error-color); }
        
        .rules-list {
            text-align: left;
            margin: 20px 0;
            line-height: 1.6;
        }
        
        .rules-list li {
            margin-bottom: 10px;
        }
        
        .rules-icon {
            color: var(--primary-color);
            margin-right: 10px;
        }
        
        .button-group {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .modal-button {
            padding: 12px 25px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .modal-button.secondary {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--primary-color);
        }
        
        .modal-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
        
        .modal-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(15, 76, 255, 0.3);
        }

        .game-status {
            margin: 15px 0;
            font-size: 1.2rem;
            font-weight: bold;
            padding: 10px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
        }
        
        .status-waiting { 
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
        }
        .status-active { 
            color: #00f2ff;
            border: 1px solid #00f2ff;
            animation: glow 2s infinite;
        }
        .status-completed { 
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }
        .status-failed { 
            color: var(--error-color);
            border: 1px solid var(--error-color);
        }

        @keyframes glow {
            0% { box-shadow: 0 0 5px rgba(0, 242, 255, 0.3); }
            50% { box-shadow: 0 0 20px rgba(0, 242, 255, 0.6); }
            100% { box-shadow: 0 0 5px rgba(0, 242, 255, 0.3); }
        }

        @media (max-width: 600px) {
            .password-char {
                width: 35px;
                height: 50px;
                font-size: 1.5rem;
            }
            
            .password-input {
                font-size: 1.1rem;
                padding: 12px;
                max-width: 300px;
            }
            
            .modal-content {
                padding: 20px;
            }
            
            .rules-list {
                font-size: 0.9rem;
            }
            
            .header {
                flex-direction: column;
                gap: 15px;
            }
            
            .back-button {
                align-self: center;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .timer {
                font-size: 2rem;
            }
        }
        
        /* –°–∫—Ä—ã–≤–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞, –Ω–æ –æ—Å—Ç–∞–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º */
        .hidden-input {
            position: absolute;
            opacity: 0;
            height: 0;
            width: 0;
            border: none;
            outline: none;
        }
        
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∏–≥—Ä—ã */
        .rating-stars {
            font-size: 2rem;
            margin: 15px 0;
            color: #ffcc00;
        }
        
        .password-rating {
            font-size: 1.2rem;
            margin-bottom: 20px;
        }
        
        .danger-message {
            color: var(--error-color);
            font-weight: bold;
            margin: 10px 0;
            animation: pulse 1s infinite;
        }
        
        .password-strength {
            margin: 15px 0;
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
        }
        
        .strength-bar {
            height: 100%;
            border-radius: 5px;
            transition: width 0.5s;
        }
        
        .strength-weak { background: #ff3d3d; }
        .strength-medium { background: #ffcc00; }
        .strength-strong { background: #16a541; }
    </style>
</head>
<body>
    <div class="header">
        <a href="../games.html" class="back-button">
            <i class="fas fa-arrow-left"></i>–ù–∞–∑–∞–¥
        </a>
        <div>
            <h1>–ü–ê–†–û–õ–¨ –ü–û–î –î–ê–í–õ–ï–ù–ò–ï–ú</h1>
            <div class="subtitle">–ü—Ä–∏–¥—É–º–∞–π –ø–∞—Ä–æ–ª—å, –ø–æ–∫–∞ –µ–≥–æ –Ω–µ –≤–∑–ª–æ–º–∞–ª–∏!</div>
        </div>
        <div style="width: 120px;"></div>
    </div>

    <div class="game-container">
        <div class="bots-container">
            <div class="bot bot-1">
                <div class="bot-name"><i class="fas fa-robot"></i> –ë–†–£–¢-–§–û–†–°</div>
                <div class="progress-container">
                    <div class="progress-bar" style="width: 0%"></div>
                    <div class="progress-text" id="progress1">0%</div>
                </div>
                <div class="bot-speed">–°–∫–æ—Ä–æ—Å—Ç—å: <span id="speed1">0</span></div>
                <div class="bot-threat" id="threat1">–ù–∏–∑–∫–∞—è —É–≥—Ä–æ–∑–∞</div>
            </div>
            <div class="bot bot-2">
                <div class="bot-name"><i class="fas fa-brain"></i> –ù–ï–ô–†–û-–•–ê–ö–ï–†</div>
                <div class="progress-container">
                    <div class="progress-bar" style="width: 0%"></div>
                    <div class="progress-text" id="progress2">0%</div>
                </div>
                <div class="bot-speed">–°–∫–æ—Ä–æ—Å—Ç—å: <span id="speed2">0</span></div>
                <div class="bot-threat" id="threat2">–°—Ä–µ–¥–Ω—è—è —É–≥—Ä–æ–∑–∞</div>
            </div>
            <div class="bot bot-3">
                <div class="bot-name"><i class="fas fa-bolt"></i> –ö–í–ê–ù–¢–û–í–´–ô</div>
                <div class="progress-container">
                    <div class="progress-bar" style="width: 0%"></div>
                    <div class="progress-text" id="progress3">0%</div>
                </div>
                <div class="bot-speed">–°–∫–æ—Ä–æ—Å—Ç—å: <span id="speed3">0</span></div>
                <div class="bot-threat" id="threat3">–í—ã—Å–æ–∫–∞—è —É–≥—Ä–æ–∑–∞</div>
            </div>
        </div>

        <div class="password-display">
            <div class="password-char">_</div>
            <div class="password-char">_</div>
            <div class="password-char">_</div>
            <div class="password-char">_</div>
            <div class="password-char">_</div>
            <div class="password-char">_</div>
            <div class="password-char">_</div>
            <div class="password-char">_</div>
        </div>

        <div class="timer-container">
            <div class="timer-label">–í–†–ï–ú–Ø –ù–ê –°–ò–ú–í–û–õ</div>
            <div class="timer" id="timer">15</div>
        </div>

        <div class="game-status status-waiting" id="gameStatus">
            <i class="fas fa-play-circle"></i> –ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –∏–≥—Ä—É" —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –ø—Ä–∏–¥—É–º—ã–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å!
        </div>

        <div class="input-container">
            <input type="text" class="password-input" id="passwordInput" placeholder="–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –ø–∞—Ä–æ–ª—å..." maxlength="1" autofocus disabled>
            <div class="input-info" id="inputInfo">–í–≤–µ–¥–∏—Ç–µ –ª—é–±–æ–π —Å–∏–º–≤–æ–ª –¥–ª—è –Ω–∞—á–∞–ª–∞</div>
            <div class="input-hint">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã –¥–ª—è —Å–ª–æ–∂–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è</div>
        </div>

        <div class="password-strength">
            <div class="strength-bar strength-weak" id="strengthBar" style="width: 0%"></div>
        </div>
        <div id="strengthText" style="margin-bottom: 15px;">–°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è: –Ω–µ –Ω–∞—á–∞—Ç</div>

        <div class="button-group">
            <button class="modal-button" id="startButton">
                <i class="fas fa-play"></i> –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
            </button>
            <button class="modal-button secondary" id="rulesButton">
                <i class="fas fa-info-circle"></i> –ü—Ä–∞–≤–∏–ª–∞
            </button>
        </div>
    </div>

    <div class="modal" id="resultModal">
        <div class="modal-content">
            <h2 id="resultTitle">–†–ï–ó–£–õ–¨–¢–ê–¢</h2>
            <div id="resultMessage"></div>
            <div class="password-rating" id="passwordRating"></div>
            <div class="rating-stars" id="ratingStars"></div>
            <div style="margin: 20px 0; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                <strong>–í–∞—à –ø–∞—Ä–æ–ª—å:</strong><br>
                <span id="finalPassword" style="font-family: 'Orbitron'; font-size: 1.3rem; letter-spacing: 2px;"></span>
            </div>
            <button id="playAgainButton"><i class="fas fa-redo"></i> –ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
        </div>
    </div>

    <div class="modal" id="rulesModal">
        <div class="modal-content">
            <h2><i class="fas fa-info-circle rules-icon"></i>–ü–†–ê–í–ò–õ–ê –ò–ì–†–´</h2>
            <ul class="rules-list">
                <li><i class="fas fa-keyboard rules-icon"></i><strong>–¶–µ–ª—å:</strong> –ø—Ä–∏–¥—É–º–∞—Ç—å –ø–∞—Ä–æ–ª—å –∏–∑ 8 —Å–∏–º–≤–æ–ª–æ–≤ –ø–æ–¥ –¥–∞–≤–ª–µ–Ω–∏–µ–º –±–æ—Ç–æ–≤</li>
                <li><i class="fas fa-clock rules-icon"></i>–ù–∞ –∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª –¥–∞–µ—Ç—Å—è <strong>15 —Å–µ–∫—É–Ω–¥</strong></li>
                <li><i class="fas fa-robot rules-icon"></i><strong>3 —Ç–∏–ø–∞ –±–æ—Ç–æ–≤</strong> –ø—ã—Ç–∞—é—Ç—Å—è –≤–∑–ª–æ–º–∞—Ç—å –≤–∞—à –ø–∞—Ä–æ–ª—å —Å —Ä–∞–∑–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é</li>
                <li><i class="fas fa-shield-alt rules-icon"></i>–ß–µ–º —Å–ª–æ–∂–Ω–µ–µ —Å–∏–º–≤–æ–ª—ã (A-Z, a-z, 0-9, !@#$%^&*), —Ç–µ–º –ª—É—á—à–µ</li>
                <li><i class="fas fa-star rules-icon"></i>–ü–æ—Å–ª–µ –∏–≥—Ä—ã –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –æ—Ü–µ–Ω–∫—É –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è</li>
                <li><i class="fas fa-exclamation-triangle rules-icon"></i><strong>–í–Ω–∏–º–∞–Ω–∏–µ!</strong> –ë–æ—Ç—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ —Å –∫–∞–∂–¥—ã–º —Å–∏–º–≤–æ–ª–æ–º!</li>
            </ul>
            <button id="closeRulesButton">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É!</button>
        </div>
    </div>

    <input type="text" class="hidden-input" id="hiddenInput">

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
            const passwordInput = document.getElementById('passwordInput');
            const hiddenInput = document.getElementById('hiddenInput');
            const passwordChars = document.querySelectorAll('.password-char');
            const timerElement = document.getElementById('timer');
            const gameStatusElement = document.getElementById('gameStatus');
            const startButton = document.getElementById('startButton');
            const rulesButton = document.getElementById('rulesButton');
            const resultModal = document.getElementById('resultModal');
            const resultTitle = document.getElementById('resultTitle');
            const resultMessage = document.getElementById('resultMessage');
            const passwordRating = document.getElementById('passwordRating');
            const ratingStars = document.getElementById('ratingStars');
            const playAgainButton = document.getElementById('playAgainButton');
            const rulesModal = document.getElementById('rulesModal');
            const closeRulesButton = document.getElementById('closeRulesButton');
            const botProgressBars = document.querySelectorAll('.progress-bar');
            const botProgressTexts = [
                document.getElementById('progress1'),
                document.getElementById('progress2'),
                document.getElementById('progress3')
            ];
            const botSpeedElements = [
                document.getElementById('speed1'),
                document.getElementById('speed2'),
                document.getElementById('speed3')
            ];
            const botThreatElements = [
                document.getElementById('threat1'),
                document.getElementById('threat2'),
                document.getElementById('threat3')
            ];
            const inputInfo = document.getElementById('inputInfo');
            const strengthBar = document.getElementById('strengthBar');
            const strengthText = document.getElementById('strengthText');
            const finalPassword = document.getElementById('finalPassword');
            
            // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–≥—Ä—ã
            const TIME_PER_CHAR = 15;
            const PASSWORD_LENGTH = 8;
            const BASE_BOT_SPEEDS = [0.8, 1.2, 1.6]; // –ë–æ—Ç—ã —Ç–µ–ø–µ—Ä—å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±—ã—Å—Ç—Ä–µ–µ!
            
            // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–≥—Ä—ã
            let password = '';
            let currentCharIndex = 0;
            let timeLeft = TIME_PER_CHAR;
            let timerInterval;
            let botIntervals = [];
            let gameState = 'waiting';
            let botProgress = [0, 0, 0];
            let botSpeedValues = [0, 0, 0];
            let speedMultiplier = 1.0;
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è
            function updatePasswordStrength() {
                if (password.length === 0) {
                    strengthBar.style.width = '0%';
                    strengthBar.className = 'strength-bar strength-weak';
                    strengthText.textContent = '–°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è: –Ω–µ –Ω–∞—á–∞—Ç';
                    return;
                }
                
                let strength = 0;
                let charTypes = new Set();
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø—ã —Å–∏–º–≤–æ–ª–æ–≤
                for (let char of password) {
                    if (/[a-z]/.test(char)) charTypes.add('lower');
                    else if (/[A-Z]/.test(char)) charTypes.add('upper');
                    else if (/\d/.test(char)) charTypes.add('digit');
                    else if (/[^a-zA-Z0-9]/.test(char)) charTypes.add('special');
                }
                
                // –û—Ü–µ–Ω–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
                strength += password.length * 5; // –î–ª–∏–Ω–∞
                strength += charTypes.size * 15; // –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ —Ç–∏–ø–æ–≤
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Å–∏–º–≤–æ–ª—ã
                const uniqueChars = new Set(password).size;
                strength += (uniqueChars / password.length) * 20;
                
                // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ 100%
                strength = Math.min(strength, 100);
                
                strengthBar.style.width = `${strength}%`;
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
                if (strength < 30) {
                    strengthBar.className = 'strength-bar strength-weak';
                    strengthText.textContent = `–°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è: —Å–ª–∞–±—ã–π (${Math.round(strength)}%)`;
                } else if (strength < 70) {
                    strengthBar.className = 'strength-bar strength-medium';
                    strengthText.textContent = `–°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è: —Å—Ä–µ–¥–Ω–∏–π (${Math.round(strength)}%)`;
                } else {
                    strengthBar.className = 'strength-bar strength-strong';
                    strengthText.textContent = `–°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è: —Å–∏–ª—å–Ω—ã–π (${Math.round(strength)}%)`;
                }
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
            function initGame() {
                password = '';
                currentCharIndex = 0;
                timeLeft = TIME_PER_CHAR;
                botProgress = [0, 0, 0];
                botSpeedValues = [...BASE_BOT_SPEEDS];
                speedMultiplier = 1.0;
                
                // –°–±—Ä–æ—Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
                passwordChars.forEach((char) => {
                    char.textContent = '_';
                    char.classList.remove('current', 'filled');
                });
                
                timerElement.textContent = timeLeft;
                timerElement.classList.remove('warning');
                updateGameStatus('waiting');
                
                // –°–±—Ä–æ—Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –±–æ—Ç–æ–≤
                botProgressBars.forEach((bar, index) => {
                    bar.style.width = '0%';
                    botProgressTexts[index].textContent = '0%';
                    botSpeedElements[index].textContent = botSpeedValues[index].toFixed(1);
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å —É–≥—Ä–æ–∑—ã
                    updateBotThreat(index);
                });
                
                // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
                clearInterval(timerInterval);
                botIntervals.forEach(interval => clearInterval(interval));
                botIntervals = [];
                
                passwordInput.value = '';
                passwordInput.disabled = true;
                passwordInput.placeholder = '–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –ø–∞—Ä–æ–ª—å...';
                
                gameState = 'waiting';
                startButton.disabled = false;
                inputInfo.textContent = '–í–≤–µ–¥–∏—Ç–µ –ª—é–±–æ–π —Å–∏–º–≤–æ–ª –¥–ª—è –Ω–∞—á–∞–ª–∞';
                
                // –°–±—Ä–æ—Å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è
                updatePasswordStrength();
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è —É–≥—Ä–æ–∑—ã –±–æ—Ç–∞
            function updateBotThreat(index) {
                const speed = botSpeedValues[index];
                let threatLevel, threatText;
                
                if (speed < 1.0) {
                    threatLevel = '–ù–∏–∑–∫–∞—è —É–≥—Ä–æ–∑–∞';
                    threatText = 'üòê';
                } else if (speed < 1.5) {
                    threatLevel = '–°—Ä–µ–¥–Ω—è—è —É–≥—Ä–æ–∑–∞';
                    threatText = 'üòü';
                } else if (speed < 2.0) {
                    threatLevel = '–í—ã—Å–æ–∫–∞—è —É–≥—Ä–æ–∑–∞';
                    threatText = 'üò®';
                } else {
                    threatLevel = '–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø!';
                    threatText = 'üíÄ';
                }
                
                botThreatElements[index].textContent = `${threatText} ${threatLevel}`;
                
                // –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –≤—ã—Å–æ–∫–æ–π —É–≥—Ä–æ–∑—ã
                if (speed >= 1.8) {
                    botThreatElements[index].style.color = '#ff2d75';
                    botThreatElements[index].style.animation = 'pulse 0.5s infinite';
                } else {
                    botThreatElements[index].style.color = '';
                    botThreatElements[index].style.animation = '';
                }
            }
            
            // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∏–≥—Ä—ã
            function updateGameStatus(status) {
                gameState = status;
                
                switch(status) {
                    case 'waiting':
                        gameStatusElement.innerHTML = '<i class="fas fa-play-circle"></i> –ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –∏–≥—Ä—É" —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –ø—Ä–∏–¥—É–º—ã–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å!';
                        gameStatusElement.className = 'game-status status-waiting';
                        break;
                    case 'active':
                        gameStatusElement.innerHTML = `<i class="fas fa-keyboard"></i> –ü—Ä–∏–¥—É–º—ã–≤–∞–π—Ç–µ —Å–∏–º–≤–æ–ª ${currentCharIndex + 1}/${PASSWORD_LENGTH} (${getTimePressureMessage()})`;
                        gameStatusElement.className = 'game-status status-active';
                        passwordInput.disabled = false;
                        passwordInput.placeholder = '–í–≤–µ–¥–∏—Ç–µ —Å–∏–º–≤–æ–ª...';
                        passwordInput.focus();
                        break;
                    case 'completed':
                        gameStatusElement.innerHTML = '<i class="fas fa-trophy"></i> –ü–∞—Ä–æ–ª—å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!';
                        gameStatusElement.className = 'game-status status-completed';
                        passwordInput.disabled = true;
                        break;
                    case 'failed':
                        gameStatusElement.innerHTML = '<i class="fas fa-skull-crossbones"></i> –ü–∞—Ä–æ–ª—å –≤–∑–ª–æ–º–∞–Ω!';
                        gameStatusElement.className = 'game-status status-failed';
                        passwordInput.disabled = true;
                        break;
                }
            }
            
            // –°–æ–æ–±—â–µ–Ω–∏–µ –æ –¥–∞–≤–ª–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏
            function getTimePressureMessage() {
                if (timeLeft > 10) return '–µ—Å—Ç—å –≤—Ä–µ–º—è';
                if (timeLeft > 5) return '—Ç–æ—Ä–æ–ø–∏—Ç–µ—Å—å!';
                return '–û–ß–ï–ù–¨ –°–†–û–ß–ù–û!';
            }
            
            // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞
            function startTimer() {
                clearInterval(timerInterval);
                timeLeft = TIME_PER_CHAR;
                timerElement.textContent = timeLeft;
                timerElement.classList.remove('warning');
                
                timerInterval = setInterval(() => {
                    timeLeft--;
                    timerElement.textContent = timeLeft;
                    
                    // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –∫–æ–≥–¥–∞ –≤—Ä–µ–º—è –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è
                    if (timeLeft <= 5) {
                        timerElement.classList.add('warning');
                    }
                    
                    // –í—Ä–µ–º—è –≤—ã—à–ª–æ
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        endGame(false, '–í—Ä–µ–º—è –≤—ã—à–ª–æ! –ë–æ—Ç—ã –≤–∑–ª–æ–º–∞–ª–∏ –≤–∞—à –ø–∞—Ä–æ–ª—å.');
                    }
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–≤–ª–µ–Ω–∏—è
                    if (gameState === 'active') {
                        updateGameStatus('active');
                    }
                }, 1000);
            }
            
            // –ó–∞–ø—É—Å–∫ –±–æ—Ç–æ–≤
            function startBots() {
                // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
                botIntervals.forEach(interval => clearInterval(interval));
                botIntervals = [];
                
                // –ó–∞–ø—É—Å–∫ —Ç—Ä–µ—Ö –±–æ—Ç–æ–≤ —Å —Ä–∞–∑–Ω–æ–π –±–∞–∑–æ–≤–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é
                for (let i = 0; i < 3; i++) {
                    // –ù–∞—á–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –±–µ—Ä–µ—Ç—Å—è –∏–∑ –±–∞–∑–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
                    botSpeedValues[i] = BASE_BOT_SPEEDS[i] * speedMultiplier;
                    
                    botIntervals.push(setInterval(() => {
                        if (gameState !== 'active') return;
                        
                        // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –≤–∑–ª–æ–º–∞
                        botProgress[i] += botSpeedValues[i];
                        const progressPercent = Math.min(botProgress[i], 100);
                        botProgressBars[i].style.width = `${progressPercent}%`;
                        botProgressTexts[i].textContent = `${Math.round(progressPercent)}%`;
                        botSpeedElements[i].textContent = botSpeedValues[i].toFixed(1);
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å —É–≥—Ä–æ–∑—ã
                        updateBotThreat(i);
                        
                        // –ï—Å–ª–∏ –±–æ—Ç –¥–æ—Å—Ç–∏–≥ 100%
                        if (botProgress[i] >= 100) {
                            endGame(false, `–ë–æ—Ç "${getBotName(i)}" –≤–∑–ª–æ–º–∞–ª –≤–∞—à –ø–∞—Ä–æ–ª—å!`);
                        }
                    }, 1000));
                }
            }
            
            // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –±–æ—Ç–æ–≤
            function increaseBotSpeed() {
                // –° –∫–∞–∂–¥—ã–º —Å–∏–º–≤–æ–ª–æ–º –±–æ—Ç—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ!
                speedMultiplier += 0.15;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–∫–æ—Ä–æ—Å—Ç–∏ –±–æ—Ç–æ–≤
                for (let i = 0; i < 3; i++) {
                    botSpeedValues[i] = BASE_BOT_SPEEDS[i] * speedMultiplier;
                    botSpeedElements[i].textContent = botSpeedValues[i].toFixed(1);
                    updateBotThreat(i);
                }
                
                // –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç
                gameStatusElement.innerHTML += ' <span class="danger-message">–ë–æ—Ç—ã —É—Å–∫–æ—Ä–∏–ª–∏—Å—å!</span>';
            }
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –±–æ—Ç–∞
            function getBotName(index) {
                const names = ['–ë–†–£–¢-–§–û–†–°', '–ù–ï–ô–†–û-–•–ê–ö–ï–†', '–ö–í–ê–ù–¢–û–í–´–ô'];
                return names[index] || `–ë–æ—Ç ${index + 1}`;
            }
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞ —Å–∏–º–≤–æ–ª–∞
            function processCharacter(char) {
                if (gameState !== 'active') return;
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Å–∏–º–≤–æ–ª –∫ –ø–∞—Ä–æ–ª—é
                password += char;
                passwordChars[currentCharIndex].textContent = char;
                passwordChars[currentCharIndex].classList.add('filled');
                
                // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–∏–º–≤–æ–ª—É
                currentCharIndex++;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è
                updatePasswordStrength();
                
                // –ï—Å–ª–∏ –ø–∞—Ä–æ–ª—å –∑–∞–≤–µ—Ä—à–µ–Ω
                if (currentCharIndex >= PASSWORD_LENGTH) {
                    endGame(true, '–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã —É—Å–ø–µ–ª–∏ –ø—Ä–∏–¥—É–º–∞—Ç—å –ø–∞—Ä–æ–ª—å –¥–æ –≤–∑–ª–æ–º–∞!');
                    return;
                }
                
                // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –±–æ—Ç–æ–≤ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞
                increaseBotSpeed();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â–∏–π —Å–∏–º–≤–æ–ª
                passwordChars.forEach(char => char.classList.remove('current'));
                passwordChars[currentCharIndex].classList.add('current');
                
                updateGameStatus('active');
                inputInfo.textContent = `–í–≤–µ–¥–µ–Ω–æ —Å–∏–º–≤–æ–ª–æ–≤: ${currentCharIndex}/${PASSWORD_LENGTH}`;
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä
                timeLeft = TIME_PER_CHAR;
                timerElement.textContent = timeLeft;
                timerElement.classList.remove('warning');
                
                // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
                passwordInput.value = '';
                passwordInput.focus();
            }
            
            // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
            function endGame(isWin, message) {
                gameState = isWin ? 'completed' : 'failed';
                clearInterval(timerInterval);
                botIntervals.forEach(interval => clearInterval(interval));
                passwordInput.disabled = true;
                startButton.disabled = false;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                resultTitle.textContent = isWin ? '–ü–û–ë–ï–î–ê!' : '–ü–û–†–ê–ñ–ï–ù–ò–ï';
                resultTitle.className = isWin ? 'win' : 'lose';
                resultMessage.innerHTML = message;
                finalPassword.textContent = password || '(–ø–∞—Ä–æ–ª—å –Ω–µ —Å–æ–∑–¥–∞–Ω)';
                
                if (isWin) {
                    const rating = calculatePasswordRating(password);
                    passwordRating.textContent = `–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è: ${rating.score}/10`;
                    ratingStars.textContent = '‚òÖ'.repeat(rating.stars) + '‚òÜ'.repeat(10 - rating.stars);
                } else {
                    passwordRating.textContent = `–í—ã —É—Å–ø–µ–ª–∏ –≤–≤–µ—Å—Ç–∏ ${currentCharIndex} –∏–∑ ${PASSWORD_LENGTH} —Å–∏–º–≤–æ–ª–æ–≤`;
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º, –∫–∞–∫–æ–π –±–æ—Ç –±—ã–ª —Å–∞–º—ã–º –±—ã—Å—Ç—Ä—ã–º
                    const fastestBotIndex = botProgress.reduce((maxIndex, progress, index) => 
                        progress > botProgress[maxIndex] ? index : maxIndex, 0);
                    
                    resultMessage.innerHTML += `<br><br>–°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π –±–æ—Ç: <strong>${getBotName(fastestBotIndex)}</strong>`;
                    ratingStars.textContent = '‚òÖ'.repeat(Math.max(0, currentCharIndex - 2)) + '‚òÜ'.repeat(10);
                }
                
                resultModal.style.display = 'flex';
                updateGameStatus(isWin ? 'completed' : 'failed');
            }
            
            // –†–∞—Å—á–µ—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è
           // –í —Ñ—É–Ω–∫—Ü–∏–∏ calculatePasswordRating –∑–∞–º–µ–Ω–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é:
function calculatePasswordRating(password) {
    let score = 0;
    
    // 1. –î–ª–∏–Ω–∞ –ø–∞—Ä–æ–ª—è (–º–∞–∫—Å–∏–º—É–º 2 –±–∞–ª–ª–∞)
    score += Math.min(password.length, PASSWORD_LENGTH) / PASSWORD_LENGTH * 2;
    
    // 2. –ù–∞–ª–∏—á–∏–µ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å–∏–º–≤–æ–ª–æ–≤ (–º–∞–∫—Å–∏–º—É–º 4 –±–∞–ª–ª–∞)
    let hasLower = /[a-z]/.test(password);
    let hasUpper = /[A-Z]/.test(password);
    let hasDigit = /\d/.test(password);
    let hasSpecial = /[^a-zA-Z0-9]/.test(password);
    
    let charTypeCount = 0;
    if (hasLower) charTypeCount++;
    if (hasUpper) charTypeCount++;
    if (hasDigit) charTypeCount++;
    if (hasSpecial) charTypeCount++;
    
    // –ë–æ–Ω—É—Å –∑–∞ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ —Ç–∏–ø–æ–≤ —Å–∏–º–≤–æ–ª–æ–≤
    score += charTypeCount;
    
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±–æ–Ω—É—Å –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö 4 —Ç–∏–ø–æ–≤
    if (charTypeCount === 4) score += 2;
    
    // 3. –®—Ç—Ä–∞—Ñ –∑–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å–∏–º–≤–æ–ª—ã (–º–∞–∫—Å–∏–º—É–º -3 –±–∞–ª–ª–∞)
    let repeatPenalty = 0;
    for (let i = 1; i < password.length; i++) {
        if (password[i] === password[i-1]) {
            repeatPenalty += 0.5;
        }
    }
    score = Math.max(0, score - Math.min(repeatPenalty, 3));
    
    // 4. –®—Ç—Ä–∞—Ñ –∑–∞ –ø—Ä–æ—Å—Ç—ã–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–º–∞–∫—Å–∏–º—É–º -2 –±–∞–ª–ª–∞)
    let sequencePenalty = 0;
    for (let i = 1; i < password.length; i++) {
        let prev = password.charCodeAt(i-1);
        let curr = password.charCodeAt(i);
        
        // –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞ –∏–ª–∏ –±—É–∫–≤—ã
        if (Math.abs(curr - prev) === 1) {
            sequencePenalty += 0.3;
        }
    }
    score = Math.max(0, score - Math.min(sequencePenalty, 2));
    
    // 5. –®—Ç—Ä–∞—Ñ –∑–∞ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Ü–∏—Ñ—Ä –ø–æ–¥—Ä—è–¥ (–æ—Å–æ–±–µ–Ω–Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö)
    if (hasDigit) {
        let digitCount = (password.match(/\d/g) || []).length;
        let digitRatio = digitCount / password.length;
        
        // –ï—Å–ª–∏ –±–æ–ª—å—à–µ –ø–æ–ª–æ–≤–∏–Ω—ã —Å–∏–º–≤–æ–ª–æ–≤ - —Ü–∏—Ñ—Ä—ã, —à—Ç—Ä–∞—Ñ
        if (digitRatio > 0.5) {
            score -= 1;
        }
        
        // –ï—Å–ª–∏ –≤—Å–µ —Ü–∏—Ñ—Ä—ã –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ (–∫–∞–∫ 111111)
        let digitMatches = password.match(/\d+/g);
        if (digitMatches) {
            for (let match of digitMatches) {
                if (match.length >= 3 && new Set(match).size === 1) {
                    score -= 2;
                    break;
                }
            }
        }
    }
    
    // 6. –ë–æ–Ω—É—Å –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–¥–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤
    let rareChars = (password.match(/[^a-zA-Z0-9]/g) || []);
    let rareCharCount = rareChars.length;
    if (rareCharCount >= 2) {
        score += 1;
    }
    
    // 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Å–ª–∞–±—ã–µ –ø–∞—Ä–æ–ª–∏
    const weakPasswords = [
        '123456', 'password', 'qwerty', '111111', '000000',
        '123123', 'abc123', 'password1', 'admin123'
    ];
    
    for (let weak of weakPasswords) {
        if (password.toLowerCase().includes(weak.toLowerCase())) {
            score -= 3;
            break;
        }
    }
    
    // 8. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–ª–∏—à–∫–æ–º –ø—Ä–æ—Å—Ç—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏
    // –ï—Å–ª–∏ –ø–∞—Ä–æ–ª—å —Å–æ—Å—Ç–æ–∏—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∏–∑ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å–∏–º–≤–æ–ª–æ–≤
    const uniqueChars = new Set(password).size;
    const uniqueRatio = uniqueChars / password.length;
    
    if (uniqueRatio < 0.4 && password.length >= 6) {
        score -= 2;
    }
    
    // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏ –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ
    score = Math.max(0, Math.min(score, 10));
    score = Math.round(score * 10) / 10;
    
    // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤–µ–∑–¥ (–æ—Ç 1 –¥–æ 10)
    const stars = Math.max(1, Math.round(score));
    
    return { score, stars };
}

// –¢–∞–∫–∂–µ –æ–±–Ω–æ–≤–∏ —Ñ—É–Ω–∫—Ü–∏—é updatePasswordStrength –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:
function updatePasswordStrength() {
    if (password.length === 0) {
        strengthBar.style.width = '0%';
        strengthBar.className = 'strength-bar strength-weak';
        strengthText.textContent = '–°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è: –Ω–µ –Ω–∞—á–∞—Ç';
        return;
    }
    
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç—É –∂–µ –ª–æ–≥–∏–∫—É, —á—Ç–æ –∏ –¥–ª—è –æ—Ü–µ–Ω–∫–∏
    let strength = 0;
    
    // 1. –î–ª–∏–Ω–∞
    strength += Math.min(password.length, PASSWORD_LENGTH) / PASSWORD_LENGTH * 20;
    
    // 2. –¢–∏–ø—ã —Å–∏–º–≤–æ–ª–æ–≤
    let hasLower = /[a-z]/.test(password);
    let hasUpper = /[A-Z]/.test(password);
    let hasDigit = /\d/.test(password);
    let hasSpecial = /[^a-zA-Z0-9]/.test(password);
    
    let charTypeCount = 0;
    if (hasLower) { charTypeCount++; strength += 10; }
    if (hasUpper) { charTypeCount++; strength += 10; }
    if (hasDigit) { charTypeCount++; strength += 10; }
    if (hasSpecial) { charTypeCount++; strength += 15; }
    
    // –ë–æ–Ω—É—Å –∑–∞ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ
    if (charTypeCount >= 3) strength += 15;
    if (charTypeCount === 4) strength += 10;
    
    // 3. –®—Ç—Ä–∞—Ñ—ã –∑–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
    let repeatCount = 0;
    for (let i = 1; i < password.length; i++) {
        if (password[i] === password[i-1]) {
            repeatCount++;
            strength -= 5;
        }
    }
    
    // 4. –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å
    const uniqueChars = new Set(password).size;
    const uniqueRatio = uniqueChars / password.length;
    strength += uniqueRatio * 20;
    
    // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ
    strength = Math.max(0, Math.min(strength, 100));
    
    strengthBar.style.width = `${strength}%`;
    
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
    if (strength < 30) {
        strengthBar.className = 'strength-bar strength-weak';
        strengthText.textContent = `–°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è: —Å–ª–∞–±—ã–π (${Math.round(strength)}%)`;
    } else if (strength < 60) {
        strengthBar.className = 'strength-bar strength-medium';
        strengthText.textContent = `–°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è: —Å—Ä–µ–¥–Ω–∏–π (${Math.round(strength)}%)`;
    } else if (strength < 80) {
        strengthBar.className = 'strength-bar strength-medium';
        strengthText.textContent = `–°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è: —Ö–æ—Ä–æ—à–∏–π (${Math.round(strength)}%)`;
    } else {
        strengthBar.className = 'strength-bar strength-strong';
        strengthText.textContent = `–°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è: –æ—Ç–ª–∏—á–Ω—ã–π (${Math.round(strength)}%)`;
    }
}
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            startButton.addEventListener('click', function() {
                if (gameState === 'waiting' || gameState === 'completed' || gameState === 'failed') {
                    initGame();
                    updateGameStatus('active');
                    startTimer();
                    startBots();
                    startButton.disabled = true;
                    inputInfo.textContent = '–í–≤–æ–¥–∏—Ç–µ –ø–æ –æ–¥–Ω–æ–º—É —Å–∏–º–≤–æ–ª—É';
                    
                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–µ—Ä–≤—ã–π —Å–∏–º–≤–æ–ª –∫–∞–∫ —Ç–µ–∫—É—â–∏–π
                    passwordChars[0].classList.add('current');
                }
            });
            
            rulesButton.addEventListener('click', function() {
                rulesModal.style.display = 'flex';
            });
            
            closeRulesButton.addEventListener('click', function() {
                rulesModal.style.display = 'none';
                if (gameState === 'waiting') {
                    passwordInput.focus();
                }
            });
            
            playAgainButton.addEventListener('click', function() {
                resultModal.style.display = 'none';
                initGame();
            });
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞
            passwordInput.addEventListener('input', function(e) {
                if (gameState !== 'active') {
                    e.preventDefault();
                    e.target.value = '';
                    return;
                }
                
                const inputChar = e.target.value;
                if (inputChar) {
                    processCharacter(inputChar);
                }
            });
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ª—é–±—ã—Ö –Ω–∞–∂–∞—Ç–∏–π –∫–ª–∞–≤–∏—à
            document.addEventListener('keydown', function(e) {
                if (gameState !== 'active') return;
                
                // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–ª–∞–≤–∏—à–∏
                if (e.key.length === 1 && e.key !== ' ') {
                    hiddenInput.focus();
                }
            });
            
            hiddenInput.addEventListener('input', function(e) {
                if (gameState !== 'active') {
                    e.preventDefault();
                    e.target.value = '';
                    return;
                }
                
                const inputChar = e.target.value;
                if (inputChar) {
                    processCharacter(inputChar);
                    e.target.value = '';
                }
                passwordInput.focus();
            });
            
            // –ë–ª–æ–∫–∏—Ä—É–µ–º –≤–≤–æ–¥ –≤ —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ, –µ—Å–ª–∏ –∏–≥—Ä–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞
            hiddenInput.addEventListener('focus', function() {
                if (gameState !== 'active') {
                    passwordInput.focus();
                }
            });
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            initGame();
        });
    </script>
</body>
</html>

